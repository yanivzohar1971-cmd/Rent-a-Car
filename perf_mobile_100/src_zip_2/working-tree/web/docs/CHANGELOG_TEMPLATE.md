# Changelog Template

This document provides a template for writing release entries in the Build Info Center changelog (`web/src/config/buildChangelog.ts`) and deployment notes.

---

## Change Type Emoji Legend

This project uses a consistent emoji-based legend to categorize changes. See **AI_GLOBAL_RULES.md Section 6** for the complete canonical legend.

**Quick Reference:**

| Emoji | Category | Description |
|-------|----------|-------------|
| üêû | Bugfix | Fixes to incorrect behavior, crashes, or defects. |
| ‚ú® | UX/UI | User experience and interface improvements. |
| üß† | Logic | Business logic changes, algorithms, or rules adjustments. |
| üß± | Infra / Refactor | Infrastructure, refactoring, performance, build, or tooling changes. |
| üñºÔ∏è | Images / Media | Gallery, images, media handling, or visual assets logic. |
| üåê | Share / SEO / Links | Public links, sharing flows, SEO/meta updates. |
| ‚úÖ | Verification / QA | Manual test scenarios, validation steps, and quality checks. |

---

## Release Entry Template

### Format

```typescript
{
  version: 'YYYY-MM-DD-NN',  // e.g. '2025-12-09-01'
  label: 'vYYYY-MM-DD-NN',   // e.g. 'v2025-12-09-01'
  env: 'production' | 'staging' | 'local',
  topic: 'Short Release Title',
  timestamp: 'YYYY-MM-DD HH:mm:ss',
  summary: 'One-line summary of the release.',
  changes: [
    {
      type: 'bugfix' | 'feature' | 'ui' | 'infra' | 'other',
      title: 'üêû Bugfix ‚Äì Short change title',
      description: 'Optional detailed description'
    },
    // ... more changes
  ]
}
```

### Example Release Entry

```typescript
{
  version: '2025-12-09-01',
  label: 'v2025-12-09-01',
  env: 'production',
  topic: 'Fix car image normalization and public URL resolution',
  timestamp: '2025-12-09 18:00:00',
  summary: 'Centralized car image normalization and fixed public car URL generation to use correct publicCarId.',
  changes: [
    {
      type: 'feature',
      title: 'üñºÔ∏è Images / Media ‚Äì Created centralized normalizeCarImages() helper supporting all legacy image formats',
      description: 'New carImageHelper.ts utility normalizes imagesJson, images, imageUrls, and mainImageUrl fields into consistent shape.'
    },
    {
      type: 'bugfix',
      title: 'üêû Bugfix ‚Äì Fixed image count showing 0 in Yard Fleet when images exist in publicCars',
      description: 'Enhanced yardFleetApi to prioritize publicCars image data over carSales legacy fields.'
    },
    {
      type: 'bugfix',
      title: 'üåê Share / SEO / Links ‚Äì Fixed Facebook share URLs using wrong car ID',
      description: 'YardSmartPublishPage now uses getEffectivePublicCarId() to resolve correct publicCars document ID before generating share URLs.'
    },
    {
      type: 'infra',
      title: 'üß± Infra / Refactor ‚Äì Applied normalizeCarImages() in carsApi and yardFleetApi',
      description: 'Removed duplicate image parsing logic from API layers, now using centralized helper.'
    }
  ]
}
```

### Writing Guidelines

1. **Use emoji prefixes:** Every change title should start with one or more emojis from the legend.
2. **Be concise:** Titles should be short and scannable (one line).
3. **Be specific:** Descriptions can be longer but should focus on what changed and why.
4. **Group related changes:** If multiple changes relate to the same feature area, consider grouping them.
5. **Professional tone:** All content must be in professional English, left-to-right.

---

## Notes

- The canonical emoji legend is defined in **AI_GLOBAL_RULES.md Section 6**.
- This template is for reference; actual changelog entries are stored in `web/src/config/buildChangelog.ts`.
- For BuildEntry templates generated by AI, see **CURSOR_MASTER_PROMPT.md** section "MASTER BUILD RULES".

